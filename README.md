# Планировщик задач

## Описание проекта

Веб-приложение планировщик для управления задачами. Планировщик хранит задачи, каждая из них содержит дату дедлайна и заголовок с комментарием. Задачи могут повторяться по заданному правилу: ежегодно или через какое-то количество дней. Если отметить такую задачу как выполненную, она переносится на следующую дату в соответствии с правилом. Обычные задачи при выполнении будут просто удаляться.

API содержит следующие операции:
-   добавить задачу;
-   получить список задач;
-   удалить задачу;
-   получить параметры задачи;
-   изменить параметры задачи;
-   отметить задачу как выполненную.

В проектре реализована возможность работы с задачами через переменные окружения, а также запуск в контейнере Docker.

## Описание директорий и файлов

-   **`/database`**: Содержит функции для создания и управления базой данных SQLite для хранения задач с повторениями. Он позволяет создавать, получать, обновлять и удалять задачи.
-   **`/handlers`**: Содержит обработчики HTTP-запросов для управления задачами в приложении. Он реализует:
1. Получение следующей даты задачи на основе текущей даты и правил повторения.
2. Создание, получение, обновление и удаление задач через соответствующие HTTP-методы (POST, GET, PUT, DELETE).
3. Валидацию входных данных, включая формат даты и правила повторения.
4. Работу с базой данных, используя функции из пакета database для взаимодействия с SQLite.
-   **`/models`**: Содержит структуру задачи.
-   **`/utils`**: Содержит функцию вычисления следующей даты задачи для повторяющихся задач.
-   **`/tests`**: Содержит тесты для различных компонентов приложения.
-   **`/web`**: В этой директории хранятся статические файлы фронтенда, такие как HTML и CSS.

## Запуск проекта локально

### Шаги для запуска:

1. Склонируйте репозиторий:

    ```bash
    git clone <URL вашего репозитория>
    cd <название папки>
    ```
2. Настройте файл .env. Пример:

    ```bash
    TODO_PORT="7540"
    TODO_DBFILE="scheduler.db"
    ```
3. Запустите приложение с помощью Go:

    ```bash
    go run .
    ```

4. Откройте браузер и перейдите по адресу:
    ```
    http://localhost:7540
    ```


## Запуск тестов

Для запуска тестов выполните следующую команду:

```bash
go test ./tests -v
```

Для очистки кэша перед повторными тестами:

```bash
go clean -testcache
```
### Параметры для тестов:

В файле `tests/settings.go` можно настроить параметры тестирования, такие как путь к базе данных или параметры аутентификации.

## Сборка и запуск проекта через Docker

1. Постройте Docker-образ:

    ```bash
    docker build -t my_todo .
    ```

2. Запустите контейнер, пробросив порты:

    ```bash
    docker run -d -p 7540:7540 my_todo:v1
    ```

3. Откройте браузер и перейдите по адресу:
    ```
    http://localhost:7540
    ```

Docker-образ включает все необходимые зависимости и файлы для запуска Go-приложения и фронтенда.

